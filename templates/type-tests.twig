{% if return.type != 'unknown' %}

    $this->assertInternalType(
        '{{return.type}}',
        {{variable}},
        'Return didn\'t match expected type {{return.type}}'
    );
{% endif %}
{% if return.type == 'object' and return.className is defined %}

    $this->assertInstanceOf(
        '{{return.className}}',
        {{variable}},
        'Return didn\'t match expected instance {{return.className}}'
    );
{% elseif return.type == 'array' and return.type.itemType is defined %}

    {% set next = variable+'_' %}
    foreach({{variable}} as {{next}}) {
        {% include 'type-tests.twig' with {'return': return.itemType, 'variable': next} only %}
    }
{% endif %}